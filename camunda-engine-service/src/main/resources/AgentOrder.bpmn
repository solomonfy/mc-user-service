<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1fq59me" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.9.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.15.0">
  <bpmn:process id="AgentOrder" name="AgentOrder" isExecutable="true" camunda:versionTag="1.0">
    <bpmn:extensionElements>
      <camunda:properties />
    </bpmn:extensionElements>
    <bpmn:startEvent id="OrderPlaced" name="Start Order">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="country" label="Country" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
            <camunda:value id="ethiopia" name="Ethiopia" />
            <camunda:value id="kenya" name="Kenya" />
            <camunda:value id="other" name="Other" />
          </camunda:formField>
          <camunda:formField id="agent" label="Agent Name" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="item" label="Item" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
            <camunda:value id="item1" name="Item 1" />
            <camunda:value id="item2" name="Item 2" />
          </camunda:formField>
          <camunda:formField id="qty" label="Quantity" type="long">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_0epnfcf</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0epnfcf" sourceRef="OrderPlaced" targetRef="CheckOrder" />
    <bpmn:userTask id="CheckOrder" name="Check Order" camunda:assignee="${ currentUser() }">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="action" label="Approve Proforma ?" type="enum">
            <camunda:value id="approved" name="Approved" />
            <camunda:value id="cancelled" name="Cancelled" />
            <camunda:value id="correction" name="Need Correction" />
          </camunda:formField>
          <camunda:formField id="approver" label="Approver Name:" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0epnfcf</bpmn:incoming>
      <bpmn:incoming>Flow_1q01y2z</bpmn:incoming>
      <bpmn:outgoing>Flow_0mllnhj</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0mllnhj" sourceRef="CheckOrder" targetRef="Gateway_0v1lygp" />
    <bpmn:endEvent id="Event_1g1sb1v" name="Order Placed">
      <bpmn:incoming>Flow_17jxh4i</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_0v1lygp">
      <bpmn:incoming>Flow_0mllnhj</bpmn:incoming>
      <bpmn:outgoing>Flow_1gac4la</bpmn:outgoing>
      <bpmn:outgoing>Flow_0gks71j</bpmn:outgoing>
      <bpmn:outgoing>Flow_14mr9rw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1gac4la" name="Need correction" sourceRef="Gateway_0v1lygp" targetRef="Activity_1x330t4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action =="correction"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="Activity_1x330t4" name="Need Correction">
      <bpmn:incoming>Flow_1gac4la</bpmn:incoming>
      <bpmn:outgoing>Flow_1q01y2z</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_1q01y2z" sourceRef="Activity_1x330t4" targetRef="CheckOrder" />
    <bpmn:boundaryEvent id="Event_1jvi5m6" name="Wait 5 days" attachedToRef="CheckOrder">
      <bpmn:outgoing>Flow_1iwd3zz</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_065lj2q">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P5D</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:endEvent id="Event_0eyx5g4" name="Cancelled">
      <bpmn:incoming>Flow_0gks71j</bpmn:incoming>
      <bpmn:incoming>Flow_1if0ja6</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0gks71j" name="Cancelled" sourceRef="Gateway_0v1lygp" targetRef="Event_0eyx5g4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action =="cancelled"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:callActivity id="Activity_1vafpct" name="Call Order Master Flow" calledElement="OrderMasterFlow">
      <bpmn:extensionElements>
        <camunda:in source="agent" target="agent" />
        <camunda:out source="agent" target="agent" />
        <camunda:out source="country" target="country" />
        <camunda:in source="country" target="country" />
        <camunda:in source="item" target="item" />
        <camunda:out source="item" target="item" />
        <camunda:in source="qty" target="qty" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1iwd3zz</bpmn:incoming>
      <bpmn:incoming>Flow_14mr9rw</bpmn:incoming>
      <bpmn:outgoing>Flow_17jxh4i</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="Flow_1iwd3zz" sourceRef="Event_1jvi5m6" targetRef="Activity_1vafpct" />
    <bpmn:sequenceFlow id="Flow_14mr9rw" name="Approved" sourceRef="Gateway_0v1lygp" targetRef="Activity_1vafpct">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${action == "approved"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:boundaryEvent id="Event_05049oc" name="Wait 5 days" attachedToRef="Activity_1x330t4">
      <bpmn:outgoing>Flow_1if0ja6</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_16gvoaf">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P5D</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1if0ja6" sourceRef="Event_05049oc" targetRef="Event_0eyx5g4" />
    <bpmn:sequenceFlow id="Flow_17jxh4i" sourceRef="Activity_1vafpct" targetRef="Event_1g1sb1v" />
  </bpmn:process>
  <bpmn:message id="Message_02lor1c" name="OrderPlaced" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="AgentOrder">
      <bpmndi:BPMNEdge id="Flow_17jxh4i_di" bpmnElement="Flow_17jxh4i">
        <di:waypoint x="700" y="277" />
        <di:waypoint x="822" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1if0ja6_di" bpmnElement="Flow_1if0ja6">
        <di:waypoint x="470" y="478" />
        <di:waypoint x="470" y="510" />
        <di:waypoint x="940" y="510" />
        <di:waypoint x="940" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14mr9rw_di" bpmnElement="Flow_14mr9rw">
        <di:waypoint x="485" y="277" />
        <di:waypoint x="600" y="277" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="511" y="259" width="48" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1iwd3zz_di" bpmnElement="Flow_1iwd3zz">
        <di:waypoint x="330" y="219" />
        <di:waypoint x="330" y="199" />
        <di:waypoint x="650" y="199" />
        <di:waypoint x="650" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gks71j_di" bpmnElement="Flow_0gks71j">
        <di:waypoint x="460" y="252" />
        <di:waypoint x="460" y="100" />
        <di:waypoint x="922" y="100" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="593" y="113" width="49" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1q01y2z_di" bpmnElement="Flow_1q01y2z">
        <di:waypoint x="410" y="420" />
        <di:waypoint x="310" y="420" />
        <di:waypoint x="310" y="317" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gac4la_di" bpmnElement="Flow_1gac4la">
        <di:waypoint x="460" y="302" />
        <di:waypoint x="460" y="380" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="471" y="360" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0mllnhj_di" bpmnElement="Flow_0mllnhj">
        <di:waypoint x="370" y="277" />
        <di:waypoint x="435" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0epnfcf_di" bpmnElement="Flow_0epnfcf">
        <di:waypoint x="198" y="277" />
        <di:waypoint x="270" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_1g1sb1v_di" bpmnElement="Event_1g1sb1v">
        <dc:Bounds x="822" y="259" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="808" y="302" width="65" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0v1lygp_di" bpmnElement="Gateway_0v1lygp" isMarkerVisible="true">
        <dc:Bounds x="435" y="252" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0lyo23h_di" bpmnElement="Activity_1x330t4">
        <dc:Bounds x="410" y="380" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0eyx5g4_di" bpmnElement="Event_0eyx5g4">
        <dc:Bounds x="922" y="82" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="915" y="58" width="49" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_00ah167_di" bpmnElement="Activity_1vafpct">
        <dc:Bounds x="600" y="237" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1p54nf8_di" bpmnElement="CheckOrder">
        <dc:Bounds x="270" y="237" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="OrderPlaced">
        <dc:Bounds x="162" y="259" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="153" y="302" width="55" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0672e6i_di" bpmnElement="Event_05049oc">
        <dc:Bounds x="452" y="442" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="491" y="473" width="58" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0a5wckm_di" bpmnElement="Event_1jvi5m6">
        <dc:Bounds x="312" y="219" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="261" y="203" width="58" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
